@startuml
' ìŠ¤íƒ€ì¼ ì„¤ì • (ê°€ë…ì„±ì„ ìœ„í•´ ì¶”ê°€)
skinparam responseMessageBelowArrow true
skinparam maxMessageSize 200
skinparam participantPadding 20
skinparam boxPadding 10

autonumber

' ì°¸ì—¬ì ì •ì˜
actor "ğŸ‘¨â€ğŸ’» ê°œë°œì A (Client)" as DevA
participant "ğŸš€ Nginx (Web Server)\n(Port 80)" as Nginx
participant "ğŸƒ Spring Boot (WAS)\n(Port 8080)" as Boot
database "ğŸ’¿ Ubuntu File System\n(/var/www/images)" as Disk
actor "ğŸ‘¨â€ğŸ’» ê°œë°œì B (Browser)" as DevB

' === 1ë‹¨ê³„: ì´ë¯¸ì§€ ì—…ë¡œë“œ ===
== 1ë‹¨ê³„: ì´ë¯¸ì§€ ì—…ë¡œë“œ (Write) ==

DevA -> Boot : POST /api/v1/images\n(íŒŒì¼, project='shop')
activate Boot

Boot -> Boot : 1. íŒŒì¼ëª… ë‚œìˆ˜í™” (UUID ìƒì„±)\n2. í”„ë¡œì íŠ¸ í´ë” í™•ì¸
Boot -> Disk : íŒŒì¼ ì €ì¥ (write)
Disk --> Boot : ì €ì¥ ì™„ë£Œ

Boot --> DevA : ì‘ë‹µ: { "url": "http://IPì£¼ì†Œ/images/shop/uuid.jpg" }
deactivate Boot

note right of DevA #Yellow
  ê°œë°œì AëŠ” ë°˜í™˜ë°›ì€ URLì„
  ìì‹ ì˜ DBì— ë¬¸ìì—´ë¡œ ì €ì¥í•¨
end note

' === 2ë‹¨ê³„: ì´ë¯¸ì§€ ì¡°íšŒ ===
== 2ë‹¨ê³„: ì´ë¯¸ì§€ ì¡°íšŒ (Read) - Spring Bootë¥¼ ê±°ì¹˜ì§€ ì•ŠìŒ! ==

DevB -> Nginx : GET http://IPì£¼ì†Œ/images/shop/uuid.jpg
activate Nginx

note right of Nginx #SkyBlue
  /images ìš”ì²­ì„ ê°ì§€í•˜ê³ 
  ë¡œì»¬ ë””ìŠ¤í¬ ê²½ë¡œë¡œ ë§¤í•‘ (Alias)
end note

Nginx -> Disk : íŒŒì¼ ì½ê¸° (read)
Disk --> Nginx : íŒŒì¼ ë°ì´í„° ìŠ¤íŠ¸ë¦¼
Nginx --> DevB : ì´ë¯¸ì§€ íŒŒì¼ ì „ì†¡ (200 OK)
deactivate Nginx

@enduml